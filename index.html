<!DOCTYPE html>
<html>
<head>
    <title>Secret Mission: Alpha</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <style>
        body { font-family: 'Courier New', Courier, monospace; background-color: #222; color: #0f0; text-align: center; padding: 20px; }
        .container { background: #000; padding: 20px; border: 2px solid #0f0; max-width: 600px; margin: 0 auto; box-shadow: 0 0 20px #0f0; }
        .level { display: none; }
        .active { display: block; }
        input { padding: 10px; font-size: 18px; border: 1px solid #0f0; background: #000; color: #0f0; width: 70%; text-align: center; }
        button { padding: 10px 20px; font-size: 18px; margin-top: 15px; background: #0f0; color: #000; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background: #fff; }
        .error { color: red; margin-top: 10px; font-weight: bold; }
        #board { margin: 20px auto; width: 100%; max-width: 400px; }
    </style>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
</head>
<body>

<div class="container">
    <h1>üïµÔ∏è SECRET AGENT PORTAL</h1>
    <hr style="border-color: #0f0;">

    <div id="level-1" class="level active">
        <h3>LEVEL 1: IDENTIFICATION</h3>
        <p>I have cities, but no houses. I have mountains, but no trees. I have water, but no fish.</p>
        <p><strong>What am I?</strong></p>
        <input type="text" id="ans-1" placeholder="Enter password...">
        <br>
        <button onclick="checkLevel1()">SUBMIT</button>
        <p id="error-1" class="error"></p>
    </div>

    <div id="level-2" class="level">
        <h3>LEVEL 2: MATH DECRYPTION</h3>
        <p>Solve the code to proceed:</p>
        <p style="font-size: 24px;">(10 x 5) + (100 / 2) - 15 = ?</p>
        <input type="number" id="ans-2" placeholder="000">
        <br>
        <button onclick="checkLevel2()">SUBMIT</button>
        <p id="error-2" class="error"></p>
    </div>

    <div id="level-3" class="level">
        <h3>LEVEL 3: THE GRANDMASTER</h3>
        <p>Win this game to unlock the treasure.</p>
        <div id="board"></div>
        <p id="status">White to move</p>
        <button onclick="checkLevel3()">I WON!</button> </div>

    <div id="level-4" class="level">
        <h1>üèÜ MISSION COMPLETE üèÜ</h1>
        <p>Great work, Agent.</p>
        <p>Your treasure is located:</p>
        <h2 style="color: yellow; border: 1px dashed yellow; padding: 10px;">BEHIND THE TV</h2>
    </div>

</div>

<script>
    // --- GAME LOGIC ---

    function checkLevel1() {
        var ans = document.getElementById('ans-1').value.toLowerCase().trim();
        if (ans === "map") {
            nextLevel(1, 2);
        } else {
            document.getElementById('error-1').innerText = "ACCESS DENIED";
        }
    }

    function checkLevel2() {
        var ans = document.getElementById('ans-2').value.trim();
        // 50 + 50 - 15 = 85
        if (ans === "85") {
            nextLevel(2, 3);
            initChess(); // Load chess board when Level 3 starts
        } else {
            document.getElementById('error-2').innerText = "INCORRECT CODE";
        }
    }

    function checkLevel3() {
        // We will make this real later
        nextLevel(3, 4);
    }

    function nextLevel(current, next) {
        document.getElementById('level-' + current).classList.remove('active');
        document.getElementById('level-' + next).classList.add('active');
    }

    // --- CHESS SETUP (Basic Rendering Only) ---
    var board = null;
    var game = new Chess();

    function initChess() {
        var config = {
            position: 'start',
            draggable: true
        };
        // This renders the board in the 'board' div
        board = Chessboard('board', config);
    }
</script>

</body>
</html>
